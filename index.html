<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BlattaLabï½œèœšè Šä»‹ç´¹èˆ‡è²©å”®</title>
  <meta name="description" content="BlattaLab å°ˆæ³¨æ–¼èœšè Šï¼ˆBlattodeaï¼‰çš„ç ”ç©¶ã€ç¹è‚²èˆ‡æ•™è‚²æ¨å»£ã€‚æä¾›ç§‘å­¸åŒ–çš„ç‰©ç¨®è³‡è¨Šèˆ‡é£¼é¤Šå»ºè­°ï¼Œä¸¦æä¾›è³¼è²·æœå‹™ã€‚" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg:#0e1012;--panel:#15181c;--muted:#9aa4af;--text:#e6ebf0;--brand:#21c48c;--brand-2:#15a17c;--ring:#2a343f;--card:#121418;--accent:#2b3947;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif;letter-spacing:.2px;background:linear-gradient(180deg,#0b0d10, #0f1317 30%, #0b0d10);color:var(--text)}
    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:30;background:rgba(18,20,24,.8);backdrop-filter:blur(10px);border-bottom:1px solid var(--ring)}
    .nav{display:flex;align-items:center;gap:16px;padding:12px 24px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .logo{width:32px;height:32px;border-radius:10px;background:conic-gradient(from 210deg at 50% 50%,#21c48c, #1b9a86, #15607a,#203241,#21c48c);display:grid;place-items:center;box-shadow:0 0 0 1px #2b3642 inset,0 10px 30px rgba(0,0,0,.35)}
    .logo svg{width:22px;height:22px;fill:#0e1012}
    .nav a{padding:8px 10px;border-radius:10px;color:var(--muted);text-decoration:none;transition:.2s}
    .nav a:hover{color:var(--text);background:var(--panel)}

    .hero{padding:56px 24px 8px}
    .hero h1{font-size:40px;margin:0 0 8px}
    .hero p{margin:0;color:var(--muted)}

    .toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;background:var(--panel);border:1px solid var(--ring);padding:12px;border-radius:14px;margin:18px 0}
    .toolbar input,.toolbar select{background:#0f1216;border:1px solid var(--ring);color:var(--text);padding:10px 12px;border-radius:10px;outline:none}
    .toolbar .chip{padding:8px 10px;border:1px solid var(--ring);border-radius:999px;cursor:pointer;color:var(--muted)}
    .toolbar .chip.active{background:var(--accent);color:var(--text)}

    .genus-tabs{display:flex;gap:8px;flex-wrap:wrap;margin:18px 0}
    .tab{padding:10px 14px;border:1px solid var(--ring);border-radius:12px;color:var(--muted);cursor:pointer;background:var(--panel)}
    .tab.active{background:linear-gradient(180deg,#1a232d,#14202a);color:var(--text);border-color:#324150}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(8,1fr)}}
    @media (max-width:720px){.grid{grid-template-columns:repeat(4,1fr)}}

    .card{grid-column:span 4;background:var(--card);border:1px solid var(--ring);border-radius:18px;overflow:hidden;display:flex;flex-direction:column}
    .thumb{aspect-ratio:16/10;background:linear-gradient(135deg,#1a2732,#0e1620);display:grid;place-items:center}
    .thumb img{width:100%;height:100%;object-fit:cover;border-radius:18px 18px 0 0;}
    .thumb .ph{font-size:12px;color:var(--muted);border:1px dashed #334152;padding:8px 10px;border-radius:10px}
    .card-body{padding:14px 14px 12px;display:flex;flex-direction:column;gap:8px}
    .latin{font-weight:700}
    .cn{color:var(--muted)}
    .meta{display:flex;flex-wrap:wrap;gap:8px}
    .tag{font-size:12px;padding:6px 8px;border:1px solid var(--ring);border-radius:999px;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:14px}
    .stars{display:inline-flex;gap:2px;vertical-align:middle}
    .stars svg{width:16px;height:16px}
    .buy{margin-top:auto;display:flex;gap:8px}
    .btn{flex:1;text-align:center;text-decoration:none;padding:10px 12px;border-radius:12px;border:1px solid #2e3b48;background:linear-gradient(180deg,#1a232d,#121820);color:#d5dee7;font-weight:600;cursor:pointer}
    .btn:hover{border-color:#3a4958}
    .btn.primary{background:linear-gradient(180deg,#23c48c,#1aa67e);border-color:#25b588;color:#07110e}

    .section-title{display:flex;justify-content:space-between;align-items:center;margin:24px 0 8px}
    .section-title h2{margin:0;font-size:20px;color:#dce6ef}
    .count{color:var(--muted);font-size:14px}

    footer{margin-top:40px;border-top:1px solid var(--ring);padding:20px 24px;color:var(--muted)}
    .note{font-size:12px;color:var(--muted)}

    /* Modal æ¨£å¼ */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background: var(--card);
      border: 1px solid var(--ring);
      border-radius: 20px;
      max-width: 600px;
      max-height: 80vh;
      width: 90%;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: translate(-50%, -50%) scale(1);
    }

    .modal-header {
      padding: 24px 24px 16px;
      border-bottom: 1px solid var(--ring);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .modal-title {
      margin: 0;
      font-size: 20px;
      color: var(--text);
      line-height: 1.3;
    }

    .modal-subtitle {
      margin: 4px 0 0;
      color: var(--muted);
      font-size: 16px;
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
      padding: 4px;
      border-radius: 8px;
      transition: all 0.2s;
      line-height: 1;
      margin-left: 16px;
    }

    .modal-close:hover {
      color: var(--text);
      background: var(--panel);
    }

    .modal-body {
      padding: 20px 24px;
      overflow-y: auto;
      max-height: 60vh;
    }

    .modal-image {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 16px;
      border: 1px solid var(--ring);
    }

    .modal-section {
      margin-bottom: 20px;
    }

    .modal-section:last-child {
      margin-bottom: 0;
    }

    .modal-section h4 {
      margin: 0 0 8px;
      font-size: 14px;
      color: var(--brand);
      font-weight: 600;
    }

    .modal-section p {
      margin: 0;
      color: var(--muted);
      line-height: 1.5;
    }

    .modal-highlight {
      background: var(--panel);
      padding: 16px;
      border-radius: 12px;
      border: 1px solid var(--ring);
      margin-top: 16px;
    }

    .modal-highlight h4 {
      color: #f3c96a;
      margin-bottom: 8px;
    }

    /* éŸ¿æ‡‰å¼èª¿æ•´ */
    @media (max-width: 720px) {
      .grid {
        grid-template-columns: 1fr !important;
        gap: 16px;
      }
      
      .card {
        grid-column: span 1 !important;
        margin: 0 8px;
        overflow: hidden;
      }
      
      .thumb {
        aspect-ratio: 16/10;
        max-height: 200px;
        overflow: hidden;
        width: 100%;
        margin: 0 !important;
        padding: 0 !important;
        border-radius: 0;
        background: none !important;
        display: block !important;
      }
      
      .thumb img {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        object-position: center !important;
        display: block;
        margin: 0;
        padding: 0;
        border-radius: 0;
      }

      .modal {
        width: 95%;
        margin: 20px;
      }

      .modal-header {
        padding: 20px 16px 12px;
      }

      .modal-body {
        padding: 16px;
      }

      .modal-title {
        font-size: 18px;
      }

      .modal-subtitle {
        font-size: 14px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 12px !important;
      }
      
      .card {
        margin: 0 4px !important;
      }
      
      .thumb {
        max-height: 180px !important;
      }
    }
  </style>
</head>

<body>
<header>
  <div class="nav container">
    <div class="brand" aria-label="BlattaLab æ¨™èªŒ">
      <div class="logo" aria-hidden="true">
        <img src="images/logo.png" alt="BlattaLab Logo" />
      </div>
      <span>BlattaLab</span>
    </div>
    <nav style="margin-left:auto;display:flex;gap:8px;flex-wrap:wrap">
      <a href="#home">é¦–é </a>
      <a href="#genus">å±¬åˆ¥ç€è¦½</a>
      <a href="#guide">é£¼é¤ŠæŒ‡å—</a>
      <a href="#about">é—œæ–¼æˆ‘å€‘</a>
    </nav>
  </div>
  </header>
  <style>
/* ä¿®æ”¹åŸæœ‰çš„ .logo æ¨£å¼ */
.logo {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  /* ç§»é™¤åŸæœ¬çš„æ¼¸å±¤èƒŒæ™¯å’Œå…§é™°å½± */
  /* background: conic-gradient(from 210deg at 50% 50%,#21c48c, #1b9a86, #15607a,#203241,#21c48c); */
  /* box-shadow: 0 0 0 1px #2b3642 inset, 0 10px 30px rgba(0,0,0,.35); */
  
  /* æ–°å¢é©åˆåœ–ç‰‡çš„æ¨£å¼ */
  overflow: hidden;
  box-shadow: 0 3px 15px rgba(0,0,0,.4); /* ç¨å¾®åŠ å¼·é™°å½±æ•ˆæœ */
}

/* æ–°å¢ logo åœ–ç‰‡æ¨£å¼ */
.logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.2s ease;
}

/* æ·»åŠ  hover æ•ˆæœ */
.logo:hover img {
  transform: scale(1.05);
}

/* ç§»é™¤åŸæœ¬çš„ logo svg æ¨£å¼ (ä¸å†éœ€è¦) */
/* .logo svg { ... } */
</style>
  
  <main id="home" class="container">
    <section class="hero" aria-labelledby="hero-title">
      <h1 id="hero-title">èœšè Šçš„ç§‘å­¸èˆ‡ç¾å­¸</h1>
      <p>å¾ Blattodea åˆ° Lab â€”â€” ä»¥ç ”ç©¶ç´šè³‡æ–™èˆ‡è¨­è¨ˆï¼Œå‘ˆç¾èœšè Šçš„ç”Ÿæ…‹åƒ¹å€¼èˆ‡é£¼é¤ŠçŸ¥è­˜ã€‚</p>
    </section>

    <section class="toolbar" aria-label="ç¯©é¸å·¥å…·">
      <input id="q" type="search" placeholder="æœå°‹å­¸å / ä¸­æ–‡å / é—œéµå­—â€¦" aria-label="æœå°‹ç‰©ç¨®" />
      <select id="difficulty" aria-label="é£¼é¤Šé›£åº¦">
        <option value="">é›£åº¦ï¼šä¸é™</option>
        <option value="1">â˜…â˜†â˜†â˜†â˜†ï¼ˆæ–°æ‰‹ï¼‰</option>
        <option value="2">â˜…â˜…â˜†â˜†â˜†</option>
        <option value="3">â˜…â˜…â˜…â˜†â˜†</option>
        <option value="4">â˜…â˜…â˜…â˜…â˜†</option>
        <option value="5">â˜…â˜…â˜…â˜…â˜…ï¼ˆé€²éšï¼‰</option>
      </select>
      <div class="chip" data-tag="åœ°æ£²" role="button" tabindex="0">åœ°æ£²</div>
      <div class="chip" data-tag="æ¨¹æ£²" role="button" tabindex="0">æ¨¹æ£²</div>
      <div class="chip" data-tag="åœŸæ£²" role="button" tabindex="0">åœŸæ£²</div>
    </section>

    <section id="genus">
      <div class="genus-tabs" role="tablist" aria-label="å±¬åˆ¥">
        <!-- JS ç”Ÿæˆå±¬åˆ¥æ¨™ç±¤ -->
      </div>

      <div class="section-title">
        <h2 id="section-title">å…¨éƒ¨ç‰©ç¨®</h2>
        <div class="count" id="count">0 ç­†</div>
      </div>

      <div class="grid" id="grid" aria-live="polite">
        <!-- JS ç”Ÿæˆå¡ç‰‡ -->
      </div>
    </section>

    <section id="guide" class="container" style="margin-top:28px">
      <div class="section-title"><h2>é£¼é¤ŠæŒ‡å—ï¼ˆé‡é»ï¼‰</h2></div>
      <ul style="margin:0;padding-left:20px;color:var(--muted)">
        <li>æº«æ¿•åº¦ï¼šå¤šæ•¸ç¨® 24â€“28Â°Cï¼›æ¿•åº¦ä¾ç¨® 60â€“80%ã€‚æä¾›ä¹¾æ¿•æ¢¯åº¦ä»¥é¿å…è„«çš®ä¸è‰¯ã€‚</li>
        <li>åº•æï¼šTherea èˆ‡åœ°æ£²ç¨®åæ¯è‘‰/è…æ¤ï¼›åœŸæ£²å¦‚ <em>Macropanesthia</em> éœ€åšåº•ææŒ–æ˜ï¼›æ¨¹æ£²å¦‚ <em>Gyna / Eucorydia</em> æ³¨é‡é€šé¢¨ã€‚</li>
        <li>ç‡Ÿé¤Šï¼šè”¬æœï¼‹å¯µç‰©ä¹¾ç³§å¯åšç‚ºç‚ºåŸºç¤ç³§é£Ÿï¼›å† è Šå±¬åŠç»€è Šå±¬ï¼ˆ<em>Pseudoglomeris, Eucorydia</em>ï¼‰é ˆè£œå……èŠ±ç²‰/èœ‚èœœæ°´ã€‚</li>
      </ul>
    </section>

    <section id="about" class="container" style="margin-top:28px">
      <div class="section-title"><h2>é—œæ–¼ BlattaLab</h2></div>
      <div class="about-content" style="display: flex; gap: 24px; align-items: flex-start; margin-top: 16px;">
        <div class="about-logo" style="flex-shrink: 0;">
          <div class="logo" style="width: 100px; height: 100px; border-radius: 16px; box-shadow: 0 8px 24px rgba(33, 196, 140, 0.15); border: 2px solid rgba(33, 196, 140, 0.2);">
            <svg viewBox="0 0 24 24" style="width: 60px; height: 60px;"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
          </div>
        </div>
        
        <div class="about-text" style="flex: 1;">
          <p style="color:var(--muted);max-width:80ch;margin:0 0 16px 0;">
            å“ç‰Œå‘½åè‡ªèœšè Šç›®ï¼ˆBlattodeaï¼‰èˆ‡å¯¦é©—å®¤ï¼ˆLabï¼‰ã€‚æˆ‘å€‘è‡´åŠ›æ–¼ä»¥ç§‘å­¸æ–¹æ³•å‘ˆç¾èœšè Šçš„å¤šæ¨£æ€§èˆ‡ç”Ÿæ…‹åŠŸèƒ½ï¼Œä¸¦æä¾›ç©©å®šçš„é£¼é¤Šèˆ‡æ•™è‚²æœå‹™ã€‚
          </p>
          
          <div style="background: var(--panel); padding: 16px; border-radius: 12px; border: 1px solid var(--ring);">
            <h3 style="margin: 0 0 8px 0; font-size: 14px; color: var(--brand); font-weight: 600;">å“ç‰Œç†å¿µ</h3>
            <p style="margin: 0; font-size: 14px; color: var(--muted); line-height: 1.5;">
              çµåˆç§‘å­¸ç ”ç©¶çš„æ…‹åº¦èˆ‡å¯¦é©—å®¤çš„æ¨™æº–ï¼ŒBlattaLab ä¸åƒ…æ˜¯èœšè Šæ„›å¥½è€…çš„çŸ¥è­˜å¯¶åº«ï¼Œæ›´æ˜¯é€£æ¥å­¸è¡“ç ”ç©¶èˆ‡å¤§çœ¾æ•™è‚²çš„æ©‹æ¨‘ã€‚æ¯ä¸€å€‹ç‰©ç¨®è³‡è¨Šéƒ½ç¶“éä»”ç´°é©—è­‰ï¼Œæ¯ä¸€ä»½é£¼é¤Šå»ºè­°éƒ½æºæ–¼å¯¦éš›ç¶“é©—ã€‚
            </p>
          </div>
        </div>
      </div>
    </section>

    <footer class="container">
      <div>Â© <span id="year"></span> BlattaLab. All rights reserved.</div>
    </footer>

    <!-- Modal æ¨¡æ…‹è¦–çª— -->
    <div class="modal-overlay" id="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <div>
            <h3 class="modal-title" id="modal-title"></h3>
            <p class="modal-subtitle" id="modal-subtitle"></p>
          </div>
          <button class="modal-close" id="modal-close" aria-label="é—œé–‰">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
          <!-- å‹•æ…‹å…§å®¹ -->
        </div>
      </div>
    </div>

    <template id="card-tpl">
      <article class="card" data-genus="" data-tags="">
        <div class="thumb" aria-hidden="true"><div class="ph">å¾…è£œåœ–ç‰‡</div></div>
        <div class="card-body">
          <div class="latin"></div>
          <div class="cn"></div>
          <div class="meta"></div>
          <div class="row temp"></div>
          <div class="row diet"></div>
          <div class="row diff"></div>
          <div class="buy">
            <button class="btn info-btn">ç‰©ç¨®ä»‹ç´¹</button>
            <a class="btn primary" target="_blank" rel="noopener">è³¼è²·é€£çµ</a>
          </div>
        </div>
      </article>
    </template>

    <script>
      const STORE_URL = "https://myship.7-11.com.tw/general/detail/GM2508133179359";

      const DATA = [
        // é¼ˆè Šå±¬
        {genus:"Therea", species:"olegrandjeani", latin:"Therea olegrandjeani", cn:"å•è™Ÿèœšè Š", features:"é»‘åº•ç¿…é¢ä¸­å¤®ç™½è‰²å•è™Ÿç‹€æ–‘ç´‹", origin:"å°åº¦", habit:"åœ°æ£²ï¼Œæ—¥ä¼å¤œå‡º", diet:"è”¬æœã€å¯µç‰©ç³§", temp:"24â€“28Â°Cï¼›60â€“80%ï¼ˆéœ€ä¹¾æ¿•åˆ†æ˜ï¼‰", diff:2, tags:["åœ°æ£²","æ–°æ‰‹+"], info:"éœ€æä¾›æ¿•åº¦æ¢¯åº¦ä»¥é¿å…è„«çš®ä¸è‰¯", img:"images/IMG20181211214008.jpg},
        {genus:"Therea", species:"bernhardti", latin:"Therea bernhardti", cn:"å¤šç±³è«¾éª¨ç‰Œèœšè Š", features:"é»‘åº•ç™½åœ“æ–‘ï¼Œä¼¼éª¨ç‰Œ", origin:"å°åº¦", habit:"åœ°æ£²ï¼Œç¾¤å±…ï¼Œå¸¸åŸ‹æ–¼æ¯è‘‰åœŸå£¤", diet:"è”¬æœã€å¯µç‰©ç³§", temp:"24â€“28Â°Cï¼›60â€“70%", diff:1, tags:["åœ°æ£²","æ–°æ‰‹å‹å–„"], info:"é©æ‡‰æ€§å¼·ï¼Œå°ç’°å¢ƒè¦æ±‚ä½", img:"images/IMG_9342.JPG},
        {genus:"Therea", species:"regularis", latin:"Therea regularis", cn:"å¤šç±³è«¾æ©˜éª¨ç‰Œèœšè Š", features:"é»‘åº•æ­é…æ©˜ç™½æ–‘ï¼Œå°æ¯”å¼·çƒˆ", origin:"å°åº¦", habit:"åœ°æ£²ï¼Œå–œéš±æ–¼è½è‘‰èˆ‡è…æ¤å±¤", diet:"è”¬æœã€å¯µç‰©ç³§", temp:"24â€“28Â°Cï¼›60â€“70%", diff:1, tags:["åœ°æ£²","æ–°æ‰‹å‹å–„"], info:"å®¹éŒ¯ç‡é«˜ï¼Œæ–°æ‰‹é©åˆ", img:"images/IMG_9157.JPG},
        {genus:"Therea", species:"cf_irreperta", latin:"Therea cf. irreperta", cn:"Therea cf. irreperta", features:"é»‘åº•å°ç¨±æ©˜æ–‘ï¼Œèˆ‡æ©˜éª¨ç‰Œç›¸ä¼¼", origin:"å°åº¦", habit:"åœ°æ£²ï¼Œæ—¥é–“åŸ‹æ–¼åº•æï¼Œå¤œé–“æ´»å‹•", diet:"è”¬æœã€å¯µç‰©ä¹¾ç³§", temp:"24â€“28Â°Cï¼›éœ€ä¹¾æ¿•äº¤ç•Œå€", diff:2, tags:["åœ°æ£²"], info:"åº•ææ¿•åº¦æ§åˆ¶é‡è¦", img:"images/IMG_9452.JPG},

        // ç“·è Šå±¬
        {genus:"Gyna", species:"caffrorum", latin:"Gyna caffrorum", cn:"å¡ä½›çˆ¾ç“·è Š", features:"æ·¡ç±³è‡³æ·ºæ£•ç¿…ï¼Œç´°ç·»æ–‘ç´‹", origin:"å—é", habit:"æ¨¹æ£²ï¼ŒçŸ­è·é£›è¡Œï¼ŒæˆèŸ²å¤œè¡Œ", diet:"è”¬æœã€å¯µç‰©ç³§", temp:"24â€“28Â°Cï¼›60â€“70%", diff:1, tags:["æ¨¹æ£²","æ–°æ‰‹å‹å–„"], info:"ç”Ÿå‘½é€±æœŸç©©å®šã€é©æ‡‰åŠ›ä½³", img:"images/Snapseed.jpg},
        {genus:"Gyna", species:"centurio", latin:"Gyna centurio", cn:"ç™¾å¤«é•·ç“·è Š", features:"é›Œé›„äºŒå‹æ˜é¡¯ï¼Œé›„ç±³ç™½ã€é›Œæ·±è¤æ–‘ç‚ºä¸»", origin:"éæ´²ä¸­éƒ¨", habit:"æ¨¹æ£²èˆ‡åœ°è¡¨æ··åˆæ´»å‹•ï¼Œå¤œè¡Œ", diet:"è”¬æœã€å¯µç‰©ç³§", temp:"24â€“28Â°Cï¼›60â€“70%", diff:1, tags:["æ¨¹æ£²","æ–°æ‰‹å‹å–„"], info:"ç¹æ®–å®¹æ˜“ï¼Œç’°å¢ƒè¦æ±‚ä½", img:"images/IMG_7931.JPG},

        // é¦¬å³¶ç¾¤
        {genus:"Princisia", species:"vanwaerebeki", latin:"Princisia vanwaerebeki", cn:"å·¨äººé¦¬å³¶èœšè Š", features:"å¤§å‹é»‘è‡³æ·±æ£•ï¼Œç©ºé–“è¶³å¯é”8å…¬åˆ†", origin:"é¦¬é”åŠ æ–¯åŠ ", habit:"åœ°æ£²ï¼Œæœƒå˜¶é³´ä½œé˜²ç¦¦æˆ–æ±‚å¶", diet:"è”¬æœã€è½è‘‰ã€å¯µç‰©ä¹¾ç³§", temp:"24â€“28Â°Cï¼›70â€“80% é«˜æ¿•ä¸”é€šé¢¨ä½³", diff:3, tags:["åœ°æ£²"], info:"éœ€ä¿æŒæ¿•åº¦èˆ‡é€šé¢¨å¹³è¡¡åŠå¤§ç©ºé–“", img:"images/IMG_9453.JPG},
        {genus:"Elliptorhina", species:"chopardi", latin:"Elliptorhina chopardi", cn:"ä¾å„’é¦¬å³¶èœšè Š", features:"æœ€å°é¦¬å³¶ï¼Œ<4 å…¬åˆ†ï¼Œæ©™è¤èˆ‡é»‘ç›¸é–“", origin:"é¦¬é”åŠ æ–¯åŠ ", habit:"åœ°æ£²ï¼Œæœƒå˜¶é³´ï¼Œè¼ƒæ´»èº", diet:"è”¬æœã€è½è‘‰ã€å¯µç‰©ä¹¾ç³§", temp:"24â€“28Â°Cï¼›70â€“80%", diff:2, tags:["åœ°æ£²"], info:"éœ€ç©©å®šæ¿•åº¦èˆ‡é€šé¢¨", img:"images/IMG_7399.JPG},
        {genus:"Aeluropoda", species:"insignis", latin:"Aeluropoda insignis", cn:"ç´…å¹³æ¿é¦¬å³¶èœšè Š", features:"ç´…è¤è‰²å¹³æ¿ç‹€ã€æ‰å¹³åŒ–", origin:"é¦¬é”åŠ æ–¯åŠ ", habit:"åœ°æ£²ï¼Œå–œè—æ–¼ç¸«éš™", diet:"è½è‘‰ã€è”¬æœã€å¯µç‰©ä¹¾ç³§", temp:"24â€“28Â°Cï¼›65â€“75%", diff:2, tags:["åœ°æ£²"], info:"éœ€ç©©å®šæ¿•åº¦èˆ‡éš±è”½ç©ºé–“", img:"images/IMG_9450.JPG},

        // é‡‘å±¬è Šå±¬
        {genus:"Pseudoglomeris", species:"magnifica", latin:"Pseudoglomeris magnifica", cn:"è¶Šå—é‡‘å±¬èœšè Š", features:"é‡‘ç¶ é‡‘å±¬å…‰æ¾¤ï¼Œæ¥µç‚ºè¯éº—", origin:"è¶Šå— Cuc Phuongï¼ˆç”¢åœ°å‹ï¼‰", habit:"æ¨¹æ£²ï¼Œæ—¥éš±æ¨¹çš®ç¸«ï¼Œå¤œé–“æ´»å‹•", diet:"æ°´æœã€èŠ±ç²‰ã€å¯µç‰©ä¹¾ç³§", temp:"24â€“27Â°Cï¼›70â€“80%ï¼ˆéœ€é€šé¢¨ï¼‰", diff:4, tags:["æ¨¹æ£²"], info:"éœ€èŠ±ç²‰èˆ‡æ–°é®®è”¬æœè£œå……", img:"images/IMG_7950.JPG},

        // ç´ºè Šå±¬
        {genus:"Eucorydia", species:"dasytoides", latin:"Eucorydia dasytoides", cn:"å¸¶ç´‹ç»€è Š", features:"äº®è—é‡‘å±¬è‰²ç¿¼å¸¶é»ƒæ¢", origin:"æ±å—äºï¼ˆå«è‡ºç£éƒ¨åˆ†ï¼‰", habit:"æ¨¹æ£²ï¼Œé£›è¡ŒåŠ›ä½³ï¼›é›„æˆèŸ²å£½å‘½çŸ­", diet:"èŠ±ç²‰ã€èœ‚èœœæ°´ã€è”¬æœã€å¯µç‰©ä¹¾ç³§", temp:"24â€“27Â°Cï¼›70â€“80%", diff:3, tags:["æ¨¹æ£²"], info:"ç”Ÿå‘½é€±æœŸé•·ï¼ŒæˆèŸ²æœŸçŸ­ï¼›é›„èŸ²éœ€ä¾›æ‡‰èŠ±ç²‰", img:"images/IMG_7960.JPG},
        {genus:"Eucorydia", species:"yasumatsui", latin:"Eucorydia yasumatsui", cn:"å®‰æ¾æ°ç»€è Š", features:"è—é»‘é‡‘å±¬å…‰æ¾¤ç¿…", origin:"æ—¥æœ¬ç‰çƒç¾¤å³¶", habit:"æ¨¹æ£²ï¼›é›„æ´»èºé£›è¡Œï¼Œå£½å‘½çŸ­", diet:"èŠ±ç²‰ã€èœ‚èœœæ°´ã€è”¬æœ", temp:"24â€“27Â°Cï¼›70â€“80%", diff:3, tags:["æ¨¹æ£²"], info:"ç”Ÿå‘½é€±æœŸé•·ï¼ŒæˆèŸ²æœŸçŸ­ï¼›é›„èŸ²éœ€ä¾›æ‡‰èŠ±ç²‰"},

        // çŠ€ç‰›
        {genus:"Macropanesthia", species:"rhinoceros", latin:"Macropanesthia rhinoceros", cn:"çŠ€ç‰›èœšè Š", features:"ä¸–ç•Œæœ€é‡å¤§å‹èœšè Šï¼Œé«”å‹åšé‡æ£•é»‘", origin:"æ¾³æ´²æ˜†å£«è˜­", habit:"åœŸæ£²ï¼ŒæŒ–æ˜åœ°æ´ä¹…å±…", diet:"å°¤åŠ åˆ©è½è‘‰ï¼ˆéœ€ç„¡æ¯’å“ç¨®ï¼‰ã€èƒ¡æ¡ƒè‘‰ç­‰", temp:"24â€“28Â°Cï¼›60â€“75%ï¼ˆåšåº•æå¯æŒ–ï¼‰", diff:5, tags:["åœŸæ£²","é€²éš"], info:"ç”Ÿé•·å‘¨æœŸæ¥µé•·ã€é£Ÿææœ‰ç‰¹å®šéœ€æ±‚", img:"images/IMG_9456.JPG}
      ];

      const genusOrder = [
        "Therea","Gyna","Princisia","Elliptorhina","Aeluropoda","Pseudoglomeris","Eucorydia","Macropanesthia"
      ];

      const $grid = document.getElementById('grid');
      const $count = document.getElementById('count');
      const $tabs = document.querySelector('.genus-tabs');
      const $q = document.getElementById('q');
      const $difficulty = document.getElementById('difficulty');
      const $chips = Array.from(document.querySelectorAll('.chip'));
      const $modalOverlay = document.getElementById('modal-overlay');
      const $modalTitle = document.getElementById('modal-title');
      const $modalSubtitle = document.getElementById('modal-subtitle');
      const $modalBody = document.getElementById('modal-body');
      const $modalClose = document.getElementById('modal-close');

      function starSVG(fill){
        return `<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="${fill? '#f3c96a':'#3a4653'}" d="M12 17.3l-6.1 3.6 1.6-6.9L2 8.9l7-.6L12 1.9l3 6.4 7 .6-5.5 5.1 1.6 6.9z"/></svg>`
      }

      function showModal(item) {
        $modalTitle.textContent = item.latin;
        $modalSubtitle.textContent = item.cn;

        const modalContent = `
          ${item.img ? `<img src="${item.img}" alt="${item.cn}" class="modal-image" onerror="this.style.display='none';">` : ''}
          
          <div class="modal-section">
            <h4>åŸºæœ¬è³‡è¨Š</h4>
            <p><strong>ç”¢åœ°ï¼š</strong>${item.origin}</p>
            <p><strong>ç¿’æ€§ï¼š</strong>${item.habit}</p>
            <p><strong>ç‰¹å¾µï¼š</strong>${item.features}</p>
          </div>

          <div class="modal-section">
            <h4>é£¼é¤Šæ¢ä»¶</h4>
            <p><strong>æº«æ¿•åº¦ï¼š</strong>${item.temp}</p>
            <p><strong>é£Ÿæ€§ï¼š</strong>${item.diet}</p>
            <p><strong>é£¼é¤Šé›£åº¦ï¼š</strong>${'â˜…'.repeat(item.diff)}${'â˜†'.repeat(5-item.diff)} (${item.diff}/5)</p>
          </div>

          <div class="modal-highlight">
            <h4>ğŸ”¬ é‡è¦æé†’</h4>
            <p>${item.info}</p>
          </div>
        `;

        $modalBody.innerHTML = modalContent;
        $modalOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function hideModal() {
        $modalOverlay.classList.remove('active');
        document.body.style.overflow = '';
      }

      // é—œé–‰ Modal äº‹ä»¶
      $modalClose.addEventListener('click', hideModal);
      $modalOverlay.addEventListener('click', (e) => {
        if (e.target === $modalOverlay) hideModal();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && $modalOverlay.classList.contains('active')) {
          hideModal();
        }
      });

      function makeCard(item){
        const tpl = document.getElementById('card-tpl');
        const node = tpl.content.firstElementChild.cloneNode(true);
        node.dataset.genus = item.genus;
        node.dataset.tags = item.tags.join(',');

        const thumb = node.querySelector('.thumb');
        if (item.img) {
          const img = document.createElement('img');
          img.src = item.img;
          img.alt = item.cn;
          img.onerror = function() {
            this.style.display = 'none';
            thumb.innerHTML = '<div class="ph">åœ–ç‰‡è¼‰å…¥å¤±æ•—</div>';
          };
          thumb.innerHTML = '';
          thumb.appendChild(img);
        }
        
        node.querySelector('.latin').textContent = `${item.latin}`;
        node.querySelector('.cn').textContent = item.cn;
        const meta = node.querySelector('.meta');
        meta.innerHTML = `
          <span class="tag">ç”¢åœ°ï¼š${item.origin}</span>
          <span class="tag">ç¿’æ€§ï¼š${item.habit}</span>
          <span class="tag">ç‰¹å¾µï¼š${item.features}</span>
        `;
        node.querySelector('.temp').textContent = `æº«æ¿•åº¦ï¼š${item.temp}`;
        node.querySelector('.diet').textContent = `é£Ÿæ€§ï¼š${item.diet}`;

        const diffRow = node.querySelector('.diff');
        diffRow.innerHTML = `é›£åº¦ï¼š<span class="stars" aria-label="é£¼é¤Šé›£åº¦ ${'â˜…'.repeat(item.diff)}${'â˜†'.repeat(5-item.diff)}">${Array.from({length:5},(_,i)=>starSVG(i<item.diff)).join('')}</span>`;

        const [btnInfo, btnBuy] = node.querySelectorAll('.buy .btn');
        
        // ä¿®æ”¹ç‰©ç¨®ä»‹ç´¹æŒ‰éˆ•äº‹ä»¶
        btnInfo.addEventListener('click', (e) => {
          e.preventDefault();
          showModal(item);
        });
        
        btnBuy.href = STORE_URL;
        btnBuy.setAttribute('aria-label', `${item.latin} è³¼è²·é€£çµ`);
        return node;
      }

      function render(genusFilter, query, diffFilter, tagSet){
        $grid.innerHTML = '';
        let list = [...DATA];
        if(genusFilter && genusFilter!=="ALL") list = list.filter(x=>x.genus===genusFilter);
        if(query){
          const q = query.trim().toLowerCase();
          list = list.filter(x => `${x.latin} ${x.cn} ${x.features} ${x.habit} ${x.origin}`.toLowerCase().includes(q));
        }
        if(diffFilter){
          list = list.filter(x=> x.diff === Number(diffFilter));
        }
        if(tagSet.size){
          list = list.filter(x=> x.tags.some(t=> tagSet.has(t)));
        }
        list.forEach(item=> $grid.appendChild(makeCard(item)));
        $count.textContent = `${list.length} ç­†`;
        const title = document.getElementById('section-title');
        title.textContent = genusFilter && genusFilter!=="ALL" ? `${genusFilter} å±¬` : 'å…¨éƒ¨ç‰©ç¨®';
      }

      function buildTabs(){
        const uniq = Array.from(new Set(DATA.map(x=>x.genus)));
        const ordered = genusOrder.filter(g=>uniq.includes(g)).concat(uniq.filter(g=>!genusOrder.includes(g)));
        const all = document.createElement('button'); all.className='tab active'; all.role='tab'; all.textContent='å…¨éƒ¨'; all.dataset.genus='ALL';
        $tabs.appendChild(all);
        ordered.forEach(g=>{
          const b = document.createElement('button');
          b.className='tab'; b.role='tab'; b.dataset.genus=g; b.textContent=g;
          $tabs.appendChild(b);
        });
      }

      function initFilters(){
        const activeTags = new Set();
        let activeGenus = 'ALL';

        function sync(){
          render(activeGenus, $q.value, $difficulty.value, activeTags);
          document.querySelectorAll('.tab').forEach(t=>{
            t.classList.toggle('active', t.dataset.genus===activeGenus);
          });
          document.querySelectorAll('.chip').forEach(c=>{
            c.classList.toggle('active', activeTags.has(c.dataset.tag));
          });
          const hash = `#g=${encodeURIComponent(activeGenus)}&q=${encodeURIComponent($q.value)}&d=${$difficulty.value}&t=${encodeURIComponent([...activeTags].join(','))}`;
          history.replaceState(null,'',hash);
        }

        $tabs.addEventListener('click', e=>{
          const btn = e.target.closest('.tab'); if(!btn) return; activeGenus = btn.dataset.genus; sync();
        });
        $q.addEventListener('input', sync);
        $difficulty.addEventListener('change', sync);
        $chips.forEach(c=>{
          c.addEventListener('click', ()=>{ const k=c.dataset.tag; activeTags.has(k)?activeTags.delete(k):activeTags.add(k); sync(); });
          c.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' '){ ev.preventDefault(); c.click(); } });
        });

        // restore from hash
        const params = new URLSearchParams(location.hash.replace(/^#/,''));
        const g = params.get('g'); const q=params.get('q'); const d=params.get('d'); const t=params.get('t');
        if(g){ activeGenus = decodeURIComponent(g); }
        if(q){ $q.value = decodeURIComponent(q); }
        if(d){ $difficulty.value = d; }
        if(t){ decodeURIComponent(t).split(',').filter(Boolean).forEach(x=>activeTags.add(x)); }

        sync();
      }

      function init(){
        document.getElementById('year').textContent = new Date().getFullYear();
        buildTabs();
        initFilters();
      }

      init();
    </script>
  </body>
</html>
